<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"/>
<link rel="stylesheet" href="resources/css/style.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<script>
$(document).ready(function(){

var json = {
 "analyzing-covid19-in-usa": {
 "title": [ "Analyzing COVID19 in USA" ],
"description": [ "Analyzing Covid 19 reports\n" ],
"author": [
 {
 "name": [ "Ardalan Mirshani" ],
"affiliation": [ "Novartis" ],
"url": [ "https://mirshani.com" ]
}
],
"date": [ "2021-01-11" ],
"base_url": [ "https://www.datamotto.com" ],
"output": {
 "distill::distill_article": {
 "self_contained": [ false ]
}
},
"packages": [ "ggplot2", "forcats" ],
"categories": [ "Visualization", "Modeling" ],
"tech": [ "R", "SqL", "Python" ],
"bibliography": [ "bibliography.bib" ],
"draft": [ false ],
"twitter": {
 "site": [ "@DataMotto" ],
"creator": [ "@DataMotto" ]
},
"link": [ "https://datamotto.com/analyzing-covid19-in-usa" ],
"preview": [ "analyzing-covid19-in-usa_files/figure-html5/unnamed-chunk-7-1.png" ],
"cover_image_url": [ "https://datamotto.com/posts/2020-12-30-analyzing-covid19-in-usa/analyzing-covid19-in-usa_files/figure-html5/unnamed-chunk-7-1.png" ]
},
"new-york-taxi-fare-rate": {
 "title": [ "New York Taxi fare rate" ],
"description": [ "A short description of the post.\n" ],
"author": [
 {
 "name": [ "Nora Jones" ],
"url": [ "https://example.com/norajones" ]
}
],
"date": [ "2020-12-03" ],
"tech": [ "Python" ],
"packages": [ "Matplotlib" ],
"categories": [ "Visualization" ],
"base_url": [ "https://datamotto.com" ],
"output": {
 "distill::distill_article": {
 "self_contained": [ false ]
}
},
"link": [ "https://datamotto.com/New-York-Taxi-Fare-Rate" ],
"preview": [ "https://bookdown.org/kdonovan125/ibis_data_analysis_r4/_main_files/figure-html/ggplot_ex_4_1-2.png" ],
"cover_image_url": [ "https://bookdown.org/kdonovan125/ibis_data_analysis_r4/_main_files/figure-html/ggplot_ex_4_1-2.png" ]
},
"post-template": {
 "title": [ "Post Template" ],
"description": [ "Here is a .html template for Dotto!\n" ],
"author": [ "Pedram" ],
"date": [ "01-26-2021" ],
"output": {
 "distill::distill_article": {
 "self_contained": [ false ]
}
},
"cover_image_url": [ null ]
}
};
// end json
var j = 0;
var more = 8; // default cart

function getPost(kind, category, language){

let arr_post = [];
more = more + 8; // add 8 cart for more
let inte = 0;

$.each(json, function(i, v){
	j++;
	let title = v.title;
	let img = v.cover_image_url[0];
	let desc = v.description;
	let author = v.author[0].name;
	let aff = v.author[0].affiliation;
	let authUrl = v.author[0].url;
	let date = v.date;
	let cats = v.categories;
	let tech = v.tech;
	let tags = '';
	let techn = '';
	let link = v.link;

	if(link){
		link = link;
	} else {
		link = '#';
	}

	if(img == null){
		img = 'resources/images/default.jpg';
	} else {
		img = img;
	}

	$.each(cats, function(d,t){
		tags += '<span class="badge badge-pill badge-info mr-1">'+t+'</span>';
	});

	$.each(tech, function(x,y){
	if(y === 'R'){
		techn += '<div class="dm-proj-r mr-1" title="R"><i class="fab fa-r-project"></i></div>';
	} else if(y === 'Python') {
		techn += '<div class="dm-proj-r mr-1" title="Python"><i class="fab fa-python"></i></div>';
		} else if(y === 'SqL') {
		techn += '<div class="dm-proj-r mr-1" title="SqL"><i class="fas fa-database"></i></div>';
	} else {
		techn += '<span>'+y+'</span>';
	}

	});

	if(kind == 'filter'){


		if(category.length){
			$.each(category, function(i, cts){
				if($.inArray(cts, cats) === -1){
				} else {
					arr_post.push(v);
				}
			});
		}
		if(language.length){
			$.each(language, function(i, lng){
				if($.inArray(lng, tech) === -1){
				} else {
					arr_post.push(v);
				}
			});
		}

	} else if(kind == 'more') {
	inte++;
		if(inte == more){
	$('#dm-post').append('<div class="col-md-3 col-sm-6 dm-posts pr-md-1 mb-1">'+
   '<div class="card rounded">'+
	'<div class="card-body">'+
	 '<div class="row">'+
		'<div class="col-md-12 dm-posts-img mb-4">'+
		  '<img class="w-100" src="'+img+'"/>'+
		'</div>'+
		'<div class="col-md-12">'+
		'<a href="'+link+'"><h2>'+title+'</h2></a>'+
	  '<ul class="row dm-posts-desc pl-3">'+
		'<li class="d-inline-block pr-1"><i class="far fa-clock"></i> '+date+'</li>'+
		'<li class="d-inline-block dm-author"><i class="far fa-user"></i> <a target="_blank" href="'+authUrl+'">'+author+'</a></li>'+
	  '</ul>'+
	  '<p>'+desc+'</p>'+
	  '<div class="row">'+
		'<div class="col-12">'+
			tags+
		'</div>'+
		'<div class="col-12 mt-2">'+
			'<div class="row justify-content-end">'+techn+'</div>'+
		'</div>'+
	  '</div>'+
		'</div>'+
	  '</div>'+
	'</div>'+
   '</div>'+
'</div>');;
		}
	} else {
	if(j <= more){
	$('#dm-post').prepend('<div class="col-md-3 col-sm-6 dm-posts pr-md-1 mb-1">'+
   '<div class="card rounded">'+
	'<div class="card-body">'+
	 '<div class="row">'+
		'<div class="col-md-12 dm-posts-img mb-4">'+
		  '<img class="w-100" src="'+img+'"/>'+
		'</div>'+
		'<div class="col-md-12">'+
		'<a href="'+link+'"><h2>'+title+'</h2></a>'+
	  '<ul class="row dm-posts-desc pl-3">'+
		'<li class="d-inline-block pr-1"><i class="far fa-clock"></i> '+date+'</li>'+
		'<li class="d-inline-block dm-author"><i class="far fa-user"></i> <a target="_blank" href="'+authUrl+'">'+author+'</a></li>'+
	  '</ul>'+
	  '<p>'+desc+'</p>'+
	  '<div class="row">'+
		'<div class="col-12">'+
			tags+
		'</div>'+
		'<div class="col-12 mt-2">'+
			'<div class="row justify-content-end">'+techn+'</div>'+
		'</div>'+
	  '</div>'+
		'</div>'+
	  '</div>'+
	'</div>'+
   '</div>'+
'</div>');
}
	}

});

var result = [];
$.each(arr_post, function (i, e) {
    var matchingItems = $.grep(result, function (item) {
       return item.title === e.title;
    });
    if (matchingItems.length === 0){
        result.push(e);
    }
});

if(kind == 'filter'){
if(result.length){
$.each(result, function(i, v){
	let title = v.title;
	let img = v.cover_image_url[0];
	let desc = v.description;
	let author = v.author[0].name;
	let aff = v.author[0].affiliation;
	let authUrl = v.author[0].url;
	let date = v.date;
	let cats = v.categories;
	let tech = v.tech;
	let tags = '';
	let techn = '';


	if(img == null){
		img = 'resources/images/default.jpg';
	} else {
		img = img;
	}

	$.each(cats, function(d,t){
		tags += '<span class="badge badge-pill badge-info mr-1">'+t+'</span>';
	});

	$.each(tech, function(x,y){
	if(y === 'R'){
		techn += '<div class="dm-proj-r mr-1" title="R"><i class="fab fa-r-project"></i></div>';
	} else if(y === 'Python') {
		techn += '<div class="dm-proj-r mr-1" title="Python"><i class="fab fa-python"></i></div>';
		} else if(y === 'SqL') {
		techn += '<div class="dm-proj-r mr-1" title="SqL"><i class="fas fa-database"></i></div>';
	} else {
		techn += '<span>'+y+'</span>';
	}

	});

	$('#dm-post').prepend('<div class="col-md-3 col-sm-6 dm-posts pr-md-1 mb-1">'+
   '<div class="card rounded">'+
	'<div class="card-body">'+
	 '<div class="row">'+
		'<div class="col-md-12 dm-posts-img mb-4">'+
		  '<img class="w-100" src="'+img+'"/>'+
		'</div>'+
		'<div class="col-md-12">'+
		'<h2>'+title+'</h2>'+
	  '<ul class="row dm-posts-desc pl-3">'+
		'<li class="d-inline-block pr-1"><i class="far fa-clock"></i> '+date+'</li>'+
		'<li class="d-inline-block dm-author"><i class="far fa-user"></i> <a target="_blank" href="'+authUrl+'">'+author+' ('+aff+')</a></li>'+
	  '</ul>'+
	  '<p>'+desc+'</p>'+
	  '<div class="row">'+
		'<div class="col-12">'+
			tags+
		'</div>'+
		'<div class="col-12 mt-2">'+
			'<div class="row justify-content-end">'+techn+'</div>'+
		'</div>'+
	  '</div>'+
		'</div>'+
	  '</div>'+
	'</div>'+
   '</div>'+
'</div>');
});


} else {
	$('#dm-post').html('<div class="alert alert-info w-100"> <strong>Oops! There is no such dotto! </div>');
}
}
}

getPost('all', false, false);

// more

$('#dm-more-btn').click(function(){
	getPost('more', false, false);
});

// filter

let cat_filter = [];
let tech_filter = [];

$('#do-filter').click(function() {
$('#dm-post').html('');
	if(cat_filter.length > 0 || tech_filter.length > 0){
		getPost('filter', cat_filter, tech_filter);
	} else {
		getPost('all', false, false);
	}
});

$('.dropdown-menu input[type="checkbox"]').click(function(){
	let name = $(this).attr('name');
	let kind = $(this).parent().parent().parent().data('kind');

	if ($(this).is(':checked')) {
		if(kind == 'categories'){
			cat_filter.push(name);
		} else if(kind == 'languages'){
			tech_filter.push(name);
		}
	} else {
		if(kind == 'categories'){
			cat_filter.splice( $.inArray(name, cat_filter), 1);
		} else if(kind == 'languages'){
			tech_filter.splice( $.inArray(name, tech_filter), 1);
		}
	}
});

$('#dm-filter-menu').on('click', function(e) {
    e.stopPropagation();
});
});
</script>
<!-- end js-->
<section id="dm-splash">
	<div class="container">
	<header id="dm-header" class="pt-3 pb-2 clearfix">
		<a id="dm-logo" class="float-left" href="welcome_page.html">
			<div class="dm-logo-dot"></div>
			<div class="dm-logo-dot"></div>
			<div class="dm-logo-dot"></div>
			<span>DATA MOTTO</span>
		</a>
		<nav class="float-left pl-5 pt-2" id="dm-nav">
			<ul class="row">
				<li class="d-inline-block"><a href="#">HOME</a></li>
				<li class="d-inline-block pl-4"><a href="#">THE WHOLE GAME!</a></li>
				<li class="d-inline-block pl-4"><a href="#">BLOG</a></li>
				<li class="d-inline-block pl-4"><a href="#">ABOUT</a></li>
			</ul>
		<div class="dropdown" id="dm-mo-nav">
		  <button type="button" class="btn gradient-button text-white rounded-pill dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars" aria-hidden="true"></i>
		  </button>
		  <div class="dropdown-menu" id="dm-mobile-content">
			<a class="dropdown-item" href="#">HOME</a>
			<a class="dropdown-item" href="#">THE WHOLE GAME!</a>
			<a class="dropdown-item" href="#">BLOG</a>
			<a class="dropdown-item" href="#">ABOUT</a>
		  </div>
		</div>
		</nav>
		<button class="float-right btn gradient-button text-white rounded-pill" id="get-started">GET STARTED</button>

	</header>
	<div class="row clear">
		<div class="col-md-6 pt-md-5 mt-5" id="dm-title">
			<h1>Share Efficiently<br/>
			Your Data Experience
			</h1>
			<p>Data science is an inter-disciplinary field that uses scientific methods, processes, algorithms and systems to extract knowledge and insights from many structural and unstructured data. Data science is related to data mining, machine learning and big data.</p>
			<button class="btn gradient-button text-white rounded-pill">LEARN MORE</button>
		</div>
		<div class="col-md-6" id="dm-splash-img">
			<img class="w-100" src="resources/images/splash-main.jpg"/>
		</div>
	</div>
	</div>
</section>

<section id="dm-middle" class="pt-5 pb-5">
<div class="container">
<h2>OUR DOTTOS</h2>
<br/>
<div class="dottos"><i class="fab fa-r-project"></i></div> <span>1</span> <div class="dottos"><i class="fab fa-python"></i></div> <span>1</span>
</div>
</section>
<!-- start cart -->
<section id="dm-post-section" class="pt-3 pb-5">
<div class="container">
<div class="dropdown pull-right">
  <button type="button" class="btn gradient-button text-white rounded-pill dropdown-toggle" data-toggle="dropdown">
    <i class="fas fa-filter"></i> Filter
  </button>

<div class="dropdown-menu p-1" id="dm-filter-menu">
	<div class="row">
	<div class="col-6" id="dm-filter-cat" data-kind="categories">
	<div class="dropdown-header"><b>CATEGORIES</b></div>
    <a class="dropdown-item"><label><input type="checkbox" class="form-check-input" name="Articles"> Articles</label></a>
    <a class="dropdown-item"><label><input type="checkbox" class="form-check-input" name="Modeling"> Modeling</label></a>
    <a class="dropdown-item"><label><input type="checkbox" class="form-check-input" name="Visualization"> Visualization</label></a>
	</div>
	<div class="col-6" id="dm-filter-lang" data-kind="languages">
	<div class="dropdown-header"><b>LANGUAGE</b></div>
	<a class="dropdown-item"><label><input type="checkbox" class="form-check-input" name="R"> <i class="fab fa-r-project"></i> R</label></a>
	<a class="dropdown-item"><label><input type="checkbox" class="form-check-input" name="Python"> <i class="fab fa-python"></i> Python</label></a>
	</div>
	</div>
	<button class="btn btn-info" id="do-filter">Go!</button>
  </div>
</div>

<br/>
<!-- post generate -->
  <div class="row" id="dm-post"></div>
  <button type="button" class="btn gradient-button text-white rounded-pill" id="dm-more-btn">MORE</button>

</section>
<!-- end cart-->

<footer id="dm-footer" class="pt-3 pb-3">
	<div class="container">
	<div id="dm-social" class="text-center">
		<a href="https://twitter.com/DataMotto" class="fab fa-twitter"></a>
		<a href="https://www.linkedin.com/company/datamotto" class="fab fa-linkedin"></a>
		<a href="https://Datamotto.slack.com" class="fab fa-slack"></a>
	</div>
	<div id="dm-copy" class="text-center mt-3">copyright <i class="fas fa-copyright"></i> 2021</div>
	</div>
</footer>
